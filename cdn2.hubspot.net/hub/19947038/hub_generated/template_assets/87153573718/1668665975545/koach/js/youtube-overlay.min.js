!function(moduleFunc){try{if("function"==typeof define&&define.amd)define("cmb-youtube-overlay",(function(){return moduleFunc(window,document)}));else{if(!window||"object"!=typeof window)throw new Error("Error on Load -> Check - May be not sure about your dev environment");window.YoutubeOverlayModule=moduleFunc(window,document)}}catch(thisError){return void console.error(thisError)}}((function(w,d){var YtConst=function(requestObj){try{if(!requestObj)throw new Error("Youtube overlay requires a request object argument.");if(!("sourceUrl"in requestObj)||!("triggerElement"in requestObj))throw new Error("Youtube overlay requires requestObject with mandatory props");if("string"!=typeof requestObj.sourceUrl||"string"!=typeof requestObj.triggerElement)throw new Error("Youtube overlay requires requestObject with mandatory props which are of string types.");if(requestObj.progressCallback&&"function"!=typeof requestObj.progressCallback)throw new Error("Youtube overlay - Progress Callback must be of function type if it is specified in the request");this.overlayContainer="#youtubePlayerOverlay",this.sourceUrl=requestObj.sourceUrl,this.triggerElement=requestObj.triggerElement,this.progressCallback=requestObj.progressCallback,this._isDoneDone={progressType:"request-completed",progressMessage:"Your request has been accepted and processed."},this._isBeingDone={progressType:"processing-request",progressMessage:"Your request is being processed. Please wait."},this._isBeingClosed={progressType:"player-closed",progressMessage:"The overlay player has been closed down."}}catch(thisError){console.error(thisError)}},cpo=YtConst.prototype;return cpo.activateDeployment=function(){this.createPlayerContainer()},cpo.createPlayerContainer=function(){if(0===$(this.overlayContainer).length){var o=$('<div class="videoPlayerOverlay hide hiddenTransform" id="youtubePlayerOverlay" data-hasloaded="false"></div>'),cButton=$('<button id="youtubeOverlayCloser" class="defaultButton closeIcon"><img src="https://s3.ap-south-1.amazonaws.com/choosemybicycle/cmb-website-icons/cancel-close-icons/x-mark-black-icon.svg" class="img-responsive center-block" alt="Close" title="close"/></button>'),b=$("body");cButton.appendTo(o),o.appendTo(b)}this.triggerCheck()},cpo.triggerCheck=function(){try{if(0===$(this.triggerElement).length)throw new Error("Youtube Overlay Constructor -> Not able to locate the required Trigger-Element. Can you please check id? ---\x3e "+this.triggerElement);this.activateOnClickHandler()}catch(thisError){console.error(thisError)}},cpo.activateOnClickHandler=function(){var $this=this,t=$this.triggerElement,o=($this.sourceUrl,$this.overlayContainer);$(t).on("click",(function(){$this.progressCallback($this._isBeingDone);var nowLoaded=$(o).attr("data-hasloaded"),triggerId=$(t).attr("id");if(nowLoaded===triggerId)$this.openPlayerOverlay(),$this.progressCallback($this._isDoneDone);else{$(o).find("iframe").remove();var requiredIframe=$('<iframe width="100%" height="100%" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen mozallowfullscreen webkitallowfullscreen></iframe>');requiredIframe.attr({src:$this.sourceUrl+"?showinfo=0&rel=0"}),requiredIframe.appendTo($(o)),$(o).attr("data-hasloaded",triggerId),$this.openPlayerOverlay(),$this.progressCallback($this._isDoneDone)}}))},cpo.openPlayerOverlay=function(){var $this=this,o=$this.overlayContainer;function initTheseInternals(){var thisIframe=$(o).find("iframe")[0];thisIframe.src+="&autoplay=1",$(o).find("#youtubeOverlayCloser").off("click").on("click",(function(){var nowVidSrc=thisIframe.src.split("&autoplay=1")[0],srcAutoplayOff=nowVidSrc+"&autoplay=0";thisIframe.src=srcAutoplayOff,thisIframe.src=nowVidSrc,$this.closePlayerOverlay()})),$this.closeOnEscapeKeyPress()}$(o).removeClass("hide"),setTimeout((function(){$(o).removeClass("hiddenTransform"),setTimeout(initTheseInternals,280)}),80)},cpo.closePlayerOverlay=function(){var $this=this,o=$this.overlayContainer;$(o).addClass("hiddenTransform"),setTimeout((function(){$(o).addClass("hide"),$this.progressCallback($this._isBeingClosed)}),260)},cpo.closeOnEscapeKeyPress=function(){var o=this.overlayContainer;$(d).on("keyup",(function(event){27!==event.which||$(o).hasClass("hiddenTransform")||$(o).find("#youtubeOverlayCloser").trigger("click")}))},cpo.closeOnClickingOverlay=function(){var overlay=$(this.overlayContainer);overlay.on("click",(function(event){"iframe"!==event.target.tagName.toLowerCase()&&"youtubePlayerOverlay"===event.target.id&&overlay.find("#youtubeOverlayCloser").trigger("click")}))},YtConst}));
//# sourceURL=https://cdn2.hubspot.net/hub/19947038/hub_generated/template_assets/87153573718/1668665975545/koach/js/youtube-overlay.js